{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Requerimento de Baixa - {{ veiculo.placa }}</title>
    <style>
        @page { 
            size: A4; 
            margin: 0.8cm; /* Margem reduzida para garantir uma p√°gina */
        }
        body { 
            font-family: Arial, sans-serif; 
            font-size: 10pt; 
            color: #000; 
            line-height: 1.15; /* Entrelinha levemente menor */
        }
        
        /* CABE√áALHO COM LOGOS */
        .header-table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
        .header-table td { vertical-align: middle; text-align: center; }
        
        /* CAIXAS E T√çTULOS */
        .box-title { 
            background-color: #ddd; 
            font-weight: bold; 
            text-align: center; 
            border: 1px solid #000; 
            padding: 3px; 
            margin-bottom: -1px; 
            font-size: 9pt; 
            text-transform: uppercase;
        }
        .box-container { 
            border: 1px solid #000; 
            margin-bottom: 5px; /* Espa√ßo entre caixas reduzido */
            padding: 5px; /* Padding interno reduzido */
        }
        
        /* LINHAS DE CAMPOS */
        .linha { display: flex; justify-content: space-between; margin-bottom: 3px; }
        .campo { flex-grow: 1; margin-right: 10px; }
        .campo:last-child { margin-right: 0; }
        
        .campo label { font-weight: bold; font-size: 8pt; margin-right: 2px; }
        .campo span { 
            border-bottom: 1px solid #000; 
            display: block; 
            min-height: 16px; /* Altura da linha ajustada */
            padding-left: 5px; 
            font-weight: bold;
            font-size: 10pt;
            position: relative;
            top: 1px;
        }
        
        .check-item { margin-bottom: 2px; font-size: 10pt; }
        
        /* Texto da declara√ß√£o */
        .declaracao-texto { 
            text-align: justify; 
            font-size: 9.5pt; 
            margin: 5px 0; 
            line-height: 1.25; 
        }
        
        /* ASSINATURA - Margens ajustadas */
        .assinatura-box { margin-top: 15px; text-align: center; }
        .assinatura-linha { border-top: 1px solid #000; width: 70%; margin: 0 auto; padding-top: 3px; }
        
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>

    <div class="no-print" style="position: fixed; top: 10px; right: 10px; background: #eee; padding: 10px; border-radius: 5px;">
        <button onclick="window.print()" style="cursor: pointer; padding: 5px 15px;">üñ®Ô∏è Imprimir</button>
    </div>

    <table class="header-table">
        <tr>
            <td width="20%">
                <img src="{% static 'img/GoiasCerto.png' %}" alt="Governo GO" style="height: 65px; max-width: 100%;">
            </td>
            <td width="60%" style="font-weight: bold; font-size: 11pt;">
                DEPARTAMENTO DE TR√ÇNSITO DE GOI√ÅS<br>
                DIRETORIA DE OPERA√á√ïES<br>
                GER√äNCIA DE REGULARIZA√á√ÉO DE VE√çCULOS<br>
                <br>
                <span style="font-size: 13pt; text-decoration: underline;">REQUERIMENTO PARA BAIXA DE VE√çCULOS</span>
            </td>
            <td width="20%">
                <img src="{% static 'img/DetranGo.png' %}" alt="Detran GO" style="height: 65px; max-width: 100%;">
            </td>
        </tr>
    </table>

    <div class="box-title">DADOS DO PROPRIET√ÅRIO DO VE√çCULO (Obrigat√≥rio o preenchimento)</div>
    <div class="box-container">
        <div class="linha">
            <div class="campo" style="flex: 3;">
                <label>NOME:</label>
                <span>{{ cliente.nome|upper }}</span>
            </div>
            <div class="campo" style="flex: 1;">
                <label>RG:</label>
                <span>{{ cliente.rg|default:"" }}</span>
            </div>
        </div>
        
        <div class="linha">
            <div class="campo" style="flex: 1;">
                <label>CPF/CNPJ:</label>
                <span>{{ cliente.cpf_cnpj }}</span>
            </div>
            <div class="campo" style="flex: 1;">
                <label>√ìRG√ÉO EXPEDIDOR:</label>
                <span>{{ cliente.orgao_expedidor|default:"" }} / {{ cliente.uf_rg|default:"" }}</span>
            </div>
            <div class="campo" style="flex: 1;">
                <label>FONE:</label>
                <span>{{ cliente.telefone }}</span>
            </div>
        </div>

        <div class="linha">
            <div class="campo" style="flex: 3;">
                <label>ENDERE√áO:</label>
                <span>{{ cliente.rua }}, {{ cliente.numero }} {{ cliente.complemento }}</span>
            </div>
            <div class="campo" style="flex: 1;">
                <label>CEP:</label>
                <span>{{ cliente.cep }}</span>
            </div>
        </div>

        <div class="linha">
            <div class="campo" style="flex: 2;">
                <label>BAIRRO:</label>
                <span>{{ cliente.bairro }}</span>
            </div>
            <div class="campo" style="flex: 2;">
                <label>CIDADE/UF:</label>
                <span>{{ cliente.cidade }} / {{ cliente.uf }}</span>
            </div>
        </div>
        
        <div class="linha">
            <div class="campo">
                <label>E-MAIL:</label>
                <span>{{ cliente.email|default:"" }}</span>
            </div>
        </div>
        
        <div class="linha" style="margin-top: 5px; border-top: 1px dotted #ccc; padding-top: 3px;">
            <div class="campo" style="display: flex; align-items: center;">
                <label style="font-size: 9pt;">POSSUI PROCURADOR?</label> 
                <span style="border: none; margin-left: 10px; font-weight: normal;">
                    ( <strong>{% if possui_procurador_baixa == 'sim' %} X {% else %} &nbsp;&nbsp; {% endif %}</strong> ) SIM 
                    &nbsp;&nbsp;&nbsp;&nbsp; 
                    ( <strong>{% if possui_procurador_baixa == 'nao' %} X {% else %} &nbsp;&nbsp; {% endif %}</strong> ) N√ÉO
                </span>
            </div>
        </div>
    </div>

    <div class="box-title">DADOS DO VE√çCULO</div>
    <div class="box-container">
        <div class="linha">
            <div class="campo">
                <label>PLACA:</label>
                <span>{{ veiculo.placa }}</span>
            </div>
            <div class="campo">
                <label>MODELO:</label>
                <span>{{ veiculo.modelo }}</span>
            </div>
        </div>
        <div class="linha">
            <div class="campo">
                <label>CHASSI:</label>
                <span>{{ veiculo.chassi|default:"" }}</span>
            </div>
            <div class="campo">
                <label>RENAVAM:</label>
                <span>{{ veiculo.renavam|default:"" }}</span>
            </div>
        </div>
    </div>

    <div class="box-title">IDENTIFICA√á√ÉO DO PROPRIET√ÅRIO</div>
    <div class="box-container">
        <div class="check-item">
            ( <strong>{% if tipo_solicitante_baixa == 'proprietario' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) Propriet√°rio do ve√≠culo
        </div>
        <div class="check-item">
            ( <strong>{% if tipo_solicitante_baixa == 'adquirente' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) Adquirente com comunicado de venda registrado junto ao DETRAN
        </div>
        <div class="check-item">
            ( <strong>{% if tipo_solicitante_baixa == 'representante' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) Representante Legal / Procura√ß√£o / Inventariante
        </div>
    </div>

    <div class="box-title">DECLARA√á√ÉO</div>
    <div class="box-container">
        <p class="declaracao-texto">
            Por meio deste termo, venho requerer a <strong>baixa do registro</strong> do ve√≠culo junto ao DETRAN/GO, nos termos da RESOLU√á√ÉO CONTRAN N¬∫ 967 e PORTARIA N¬∫ 493/2025/DETRAN, pelo seguinte motivo:
        </p>

        <div class="check-item">
            ( <strong>{% if motivo_baixa == 'irrecuperavel' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) ve√≠culo irrecuper√°vel
        </div>
        <div class="check-item">
            ( <strong>{% if motivo_baixa == 'desmontado' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) ve√≠culo definitivamente desmontado
        </div>
        <div class="check-item">
            ( <strong>{% if motivo_baixa == 'sinistrado' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) ve√≠culo sinistrado com laudo de perda total ou com registro de danos de grande monta
        </div>
        <div class="check-item">
            ( <strong>{% if motivo_baixa == 'sucata' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) ve√≠culo vendido ou leiloado, classificado como sucata
        </div>
        <div class="check-item">
            ( <strong>{% if motivo_baixa == 'frota' %}X{% else %}&nbsp;&nbsp;{% endif %}</strong> ) Frota desativada - n√£o √© licenciado h√° 10 (dez) anos ou mais e possui 25 (vinte e cinco) anos ou mais de fabrica√ß√£o
        </div>

        <p class="declaracao-texto" style="margin-top: 8px;">
            <strong>Declaro que as placas e recorte do chassi do ve√≠culo foram inutilizados</strong> e Declaro sob as penas da lei, que o contido acima √© a express√£o da verdade, assumindo todos e quaisquer √¥nus decorrentes deste ato, isentando o DETRAN-GO e seus prepostos das responsabilidades de natureza C√çVIL, PENAL E/OU ADMINISTRATIVA, resultante desta solicita√ß√£o. Declaro, ainda, que autorizo o envio da Certid√£o de Baixa ou do Ato de Indeferimento ao endere√ßo de email informado acima.
        </p>
    </div>

    <div class="assinatura-box">
        Goi√¢nia, {{ hoje|date:"d" }} de {{ hoje|date:"F" }} de {{ hoje|date:"Y" }}
        <br><br><br><br><br> <div class="assinatura-linha">
            {% if tipo_solicitante_baixa == 'representante' and outorgado.nome %}
                {{ outorgado.nome|upper }}
            {% else %}
                {{ cliente.nome|upper }}
            {% endif %}
            <br>
            <span style="font-size: 8pt;">Assinatura do Propriet√°rio/Representante Legal</span><br>
            <span style="font-size: 7pt;">(Reconhecida firma por verdadeira ou Assinatura Digital)</span>
        </div>
    </div>

</body>
</html>